"use strict";var A=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports);var j=A(()=>{});var M=A(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),function(r,n){for(var e in n)Object.defineProperty(r,e,{enumerable:!0,get:n[e]})}(_,{createActions:function(){return R},createDataFieldsReactions:function(){return k}});var l=require("mobx-miniprogram");function x(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,t=Array(n);e<n;e++)t[e]=r[e];return t}function D(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}function q(r){return function(n){if(Array.isArray(n))return x(n)}(r)||function(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(r)||function(n,e){if(n){if(typeof n=="string")return x(n,void 0);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(n,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(r){return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r}var R=function(r,n){var e=n.store,t=n.actions;if(t){if(e===void 0)throw Error("[mobx-miniprogram] no store specified");Array.isArray(t)?t.forEach(function(o){if(r[o])throw Error("[mobx-miniprogram] multiple action definition");r[o]=function(){for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return e[o].apply(e,q(c))}}):(t===void 0?"undefined":F(t))==="object"&&Object.keys(t).forEach(function(o){var u=t[o];if(typeof o!="string"&&typeof o!="number")throw Error("[mobx-miniprogram] unrecognized field definition");r[o]=function(){for(var c=arguments.length,s=Array(c),a=0;a<c;a++)s[a]=arguments[a];return e[u].apply(e,q(s))}})}},k=function(r,n){var e=n.store,t=n.fields,o=n.structuralComparison,u=n.namespace||"";if(u&&typeof u!="string")throw Error("[mobx-miniprogram] namespace only expect string");var c=Object.assign({},r[u=u.replace(RegExp(" ","gm"),"")]),s=o?l.comparer.structural:void 0,a=null,B=function(){if(a!==null){var i=a;a=null,r.setData(i)}},O=function(i,f){if(a||(a={},typeof wx<"u"?wx.nextTick(B):Promise.resolve().then(B)),u!==""){var d,g;d=function(m){for(var b=1;b<arguments.length;b++){var p=arguments[b]!=null?arguments[b]:{},y=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(p).filter(function(h){return Object.getOwnPropertyDescriptor(p,h).enumerable}))),y.forEach(function(h){D(m,h,p[h])})}return m}({},c),g=(g=D({},i,(0,l.toJS)(f)))!=null?g:{},Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):function(m,b){var p=Object.keys(m);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(m);p.push.apply(p,y)}return p}(Object(g)).forEach(function(m){Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(g,m))}),c=d,a[u]=c}else a[i]=(0,l.toJS)(f)},S=[];if(Array.isArray(t)){if(e===void 0)throw Error("[mobx-miniprogram] no store specified");S=t.map(function(i){return(0,l.reaction)(function(){return e[i]},function(f){O(i,f)},{equals:s,fireImmediately:!0})})}else(t===void 0?"undefined":F(t))==="object"&&t&&(S=Object.keys(t).map(function(i){var f=t[i];if(typeof f=="function")return(0,l.reaction)(function(){return f.call(r,e)},function(d){O(i,d)},{equals:s,fireImmediately:!0});if(typeof i!="string"&&typeof i!="number")throw Error("[mobx-miniprogram] unrecognized field definition");if(e===void 0)throw Error("[mobx-miniprogram] no store specified");return(0,l.reaction)(function(){return e[f]},function(d){O(String(i),d)},{equals:s,fireImmediately:!0})}));return{updateStoreBindings:B,destroyStoreBindings:function(){S.forEach(function(i){return i()})}}}});var I=A(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),Object.defineProperty(w,"behavior",{enumerable:!0,get:function(){return C}}),j();var v=M(),C=Behavior({definitionFilter:function(r){r.methods=r.methods||{};var n=r.storeBindings;r.methods._mobxMiniprogramBindings=function(){return n},n&&(Array.isArray(n)?n.forEach(function(e){(0,v.createActions)(r.methods,e)}):(0,v.createActions)(r.methods,n))},lifetimes:{attached:function(){var r=this;if(typeof r._mobxMiniprogramBindings=="function"){var n=r._mobxMiniprogramBindings();if(!n){r._mobxMiniprogramBindings=null;return}Array.isArray(n)?r._mobxMiniprogramBindings=n.map(function(e){var t=(0,v.createDataFieldsReactions)(r,e);return t.updateStoreBindings(),t}):(r._mobxMiniprogramBindings=(0,v.createDataFieldsReactions)(this,n),r._mobxMiniprogramBindings.updateStoreBindings())}},detached:function(){this._mobxMiniprogramBindings&&(Array.isArray(this._mobxMiniprogramBindings)?this._mobxMiniprogramBindings.forEach(function(r){r.destroyStoreBindings()}):this._mobxMiniprogramBindings.destroyStoreBindings())}},methods:{updateStoreBindings:function(){this._mobxMiniprogramBindings&&typeof this._mobxMiniprogramBindings!="function"&&(Array.isArray(this._mobxMiniprogramBindings)?this._mobxMiniprogramBindings.forEach(function(r){r.updateStoreBindings()}):this._mobxMiniprogramBindings.updateStoreBindings())}}})});Object.defineProperty(exports,"__esModule",{value:!0}),function(r,n){for(var e in n)Object.defineProperty(r,e,{enumerable:!0,get:n[e]})}(exports,{BehaviorWithStore:function(){return J},ComponentWithStore:function(){return z},createStoreBindings:function(){return T},initStoreBindings:function(){return U},storeBindingsBehavior:function(){return W}}),j();var E=I(),P=M();function z(r){return Array.isArray(r.behaviors)||(r.behaviors=[]),r.behaviors.unshift(E.behavior),Component(r)}function J(r){return Array.isArray(r.behaviors)||(r.behaviors=[]),r.behaviors.unshift(E.behavior),Behavior(r)}var T=function(r,n){return(0,P.createActions)(r,n),(0,P.createDataFieldsReactions)(r,n)},W=E.behavior,U=function(r,n){var e,t=r.self,o=r.lifetime;return o("attached",function(){(e=(0,P.createDataFieldsReactions)(t,n)).updateStoreBindings()}),o("detached",function(){e.destroyStoreBindings()}),{updateStoreBindings:function(){e&&e.updateStoreBindings()}}};
