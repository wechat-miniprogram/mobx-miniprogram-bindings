"use strict";var w=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var S=w(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0}),function(r,t){for(var i in t)Object.defineProperty(r,i,{enumerable:!0,get:t[i]})}(x,{createActions:function(){return I},createDataFieldsReactions:function(){return k}});var l=require("mobx-miniprogram");function j(r,t){(t==null||t>r.length)&&(t=r.length);for(var i=0,e=Array(t);i<t;i++)e[i]=r[i];return e}function P(r,t,i){return t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i,r}function E(r){return function(t){if(Array.isArray(t))return j(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||function(t,i){if(t){if(typeof t=="string")return j(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return j(t,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=function(r,t){var i=t.store,e=t.actions;if(e){if(i===void 0)throw Error("[mobx-miniprogram] no store specified");Array.isArray(e)?e.forEach(function(u){if(r[u])throw Error("[mobx-miniprogram] multiple action definition");r[u]=function(){for(var a=arguments.length,c=Array(a),s=0;s<a;s++)c[s]=arguments[s];return i[u].apply(i,E(c))}}):typeof e=="object"&&Object.keys(e).forEach(function(u){var a=e[u];if(typeof u!="string"&&typeof u!="number")throw Error("[mobx-miniprogram] unrecognized field definition");r[u]=function(){for(var c=arguments.length,s=Array(c),o=0;o<c;o++)s[o]=arguments[o];return i[a].apply(i,E(s))}})}},k=function(r,t){var i=t.store,e=t.fields,u=t.structuralComparison,a=t.namespace||"";if(a&&typeof a!="string")throw Error("[mobx-miniprogram] namespace only expect string");var c=Object.assign({},r[a=a.replace(RegExp(" ","gm"),"")]),s=u?l.comparer.structural:void 0,o=null,O=function(){if(o!==null){var n=o;o=null,r.setData(n)}},B=function(n,f){if(o||(o={},typeof wx<"u"?wx.nextTick(O):Promise.resolve().then(O)),a!==""){var m,g;m=function(p){for(var b=1;b<arguments.length;b++){var d=arguments[b]!=null?arguments[b]:{},y=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(d).filter(function(h){return Object.getOwnPropertyDescriptor(d,h).enumerable}))),y.forEach(function(h){P(p,h,d[h])})}return p}({},c),g=(g=P({},n,(0,l.toJS)(f)))!=null?g:{},Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(g)):function(p,b){var d=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);d.push.apply(d,y)}return d}(Object(g)).forEach(function(p){Object.defineProperty(m,p,Object.getOwnPropertyDescriptor(g,p))}),c=m,o[a]=c}else o[n]=(0,l.toJS)(f)},A=[];if(Array.isArray(e)){if(i===void 0)throw Error("[mobx-miniprogram] no store specified");A=e.map(function(n){return(0,l.reaction)(function(){return i[n]},function(f){B(n,f)},{equals:s,fireImmediately:!0})})}else typeof e=="object"&&e&&(A=Object.keys(e).map(function(n){var f=e[n];if(typeof f=="function")return(0,l.reaction)(function(){return f.call(r,i)},function(m){B(n,m)},{equals:s,fireImmediately:!0});if(typeof n!="string"&&typeof n!="number")throw Error("[mobx-miniprogram] unrecognized field definition");if(i===void 0)throw Error("[mobx-miniprogram] no store specified");return(0,l.reaction)(function(){return i[f]},function(m){B(String(n),m)},{equals:s,fireImmediately:!0})}));return{updateStoreBindings:O,destroyStoreBindings:function(){A.forEach(function(n){return n()})}}}});var D=w(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"behavior",{enumerable:!0,get:function(){return F}});var v=S(),F=Behavior({definitionFilter:function(r){r.methods=r.methods||{};var t=r.storeBindings;r.methods._mobxMiniprogramBindings=function(){return t},t&&(Array.isArray(t)?t.forEach(function(i){(0,v.createActions)(r.methods,i)}):(0,v.createActions)(r.methods,t))},lifetimes:{attached:function(){if(typeof this._mobxMiniprogramBindings=="function"){var r=this._mobxMiniprogramBindings();if(!r){this._mobxMiniprogramBindings=null;return}if(Array.isArray(r)){var t=this;this._mobxMiniprogramBindings=r.map(function(i){var e=(0,v.createDataFieldsReactions)(t,i);return e.updateStoreBindings(),e})}else this._mobxMiniprogramBindings=(0,v.createDataFieldsReactions)(this,r),this._mobxMiniprogramBindings.updateStoreBindings()}},detached:function(){this._mobxMiniprogramBindings&&(Array.isArray(this._mobxMiniprogramBindings)?this._mobxMiniprogramBindings.forEach(function(r){r.destroyStoreBindings()}):this._mobxMiniprogramBindings.destroyStoreBindings())}},methods:{updateStoreBindings:function(){this._mobxMiniprogramBindings&&typeof this._mobxMiniprogramBindings!="function"&&(Array.isArray(this._mobxMiniprogramBindings)?this._mobxMiniprogramBindings.forEach(function(r){r.updateStoreBindings()}):this._mobxMiniprogramBindings.updateStoreBindings())}}})});Object.defineProperty(exports,"__esModule",{value:!0}),function(r,t){for(var i in t)Object.defineProperty(r,i,{enumerable:!0,get:t[i]})}(exports,{BehaviorWithStore:function(){return C},ComponentWithStore:function(){return R},createStoreBindings:function(){return z},storeBindingsBehavior:function(){return J}});var M=D(),q=S();function R(r){return Array.isArray(r.behaviors)||(r.behaviors=[]),r.behaviors.unshift(M.behavior),Component(r)}function C(r){return Array.isArray(r.behaviors)||(r.behaviors=[]),r.behaviors.unshift(M.behavior),Behavior(r)}var z=function(r,t){return(0,q.createActions)(r,t),(0,q.createDataFieldsReactions)(r,t)},J=M.behavior;
