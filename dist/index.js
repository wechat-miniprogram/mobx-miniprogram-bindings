"use strict";var P=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var x=P(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0}),function(r,t){for(var n in t)Object.defineProperty(r,n,{enumerable:!0,get:t[n]})}(j,{createActions:function(){return I},createDataFieldsReactions:function(){return R}});var l=require("mobx-miniprogram");function A(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);n<t;n++)e[n]=r[n];return e}function E(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function D(r){return function(t){if(Array.isArray(t))return A(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||function(t,n){if(t){if(typeof t=="string")return A(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A(t,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(r){return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r}var I=function(r,t){var n=t.store,e=t.actions;if(e){if(n===void 0)throw Error("[mobx-miniprogram] no store specified");Array.isArray(e)?e.forEach(function(o){if(r[o])throw Error("[mobx-miniprogram] multiple action definition");r[o]=function(){for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n[o].apply(n,D(c))}}):(e===void 0?"undefined":q(e))==="object"&&Object.keys(e).forEach(function(o){var s=e[o];if(typeof o!="string"&&typeof o!="number")throw Error("[mobx-miniprogram] unrecognized field definition");r[o]=function(){for(var c=arguments.length,u=Array(c),a=0;a<c;a++)u[a]=arguments[a];return n[s].apply(n,D(u))}})}},R=function(r,t){var n=t.store,e=t.fields,o=t.structuralComparison,s=t.namespace||"";if(s&&typeof s!="string")throw Error("[mobx-miniprogram] namespace only expect string");var c=Object.assign({},r[s=s.replace(RegExp(" ","gm"),"")]),u=o?l.comparer.structural:void 0,a=null,B=function(){if(a!==null){var i=a;a=null,r.setData(i)}},O=function(i,f){if(a||(a={},typeof wx<"u"?wx.nextTick(B):Promise.resolve().then(B)),s!==""){var d,g;d=function(m){for(var b=1;b<arguments.length;b++){var p=arguments[b]!=null?arguments[b]:{},y=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(p).filter(function(h){return Object.getOwnPropertyDescriptor(p,h).enumerable}))),y.forEach(function(h){E(m,h,p[h])})}return m}({},c),g=(g=E({},i,(0,l.toJS)(f)))!=null?g:{},Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):function(m,b){var p=Object.keys(m);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(m);p.push.apply(p,y)}return p}(Object(g)).forEach(function(m){Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(g,m))}),c=d,a[s]=c}else a[i]=(0,l.toJS)(f)},S=[];if(Array.isArray(e)){if(n===void 0)throw Error("[mobx-miniprogram] no store specified");S=e.map(function(i){return(0,l.reaction)(function(){return n[i]},function(f){O(i,f)},{equals:u,fireImmediately:!0})})}else(e===void 0?"undefined":q(e))==="object"&&e&&(S=Object.keys(e).map(function(i){var f=e[i];if(typeof f=="function")return(0,l.reaction)(function(){return f.call(r,n)},function(d){O(i,d)},{equals:u,fireImmediately:!0});if(typeof i!="string"&&typeof i!="number")throw Error("[mobx-miniprogram] unrecognized field definition");if(n===void 0)throw Error("[mobx-miniprogram] no store specified");return(0,l.reaction)(function(){return n[f]},function(d){O(String(i),d)},{equals:u,fireImmediately:!0})}));return{updateStoreBindings:B,destroyStoreBindings:function(){S.forEach(function(i){return i()})}}}});var F=P(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"behavior",{enumerable:!0,get:function(){return k}});var v=x(),k=Behavior({definitionFilter:function(r){r.methods=r.methods||{};var t=r.storeBindings;r.methods._mobxMiniprogramBindings=function(){return t},t&&(Array.isArray(t)?t.forEach(function(n){(0,v.createActions)(r.methods,n)}):(0,v.createActions)(r.methods,t))},lifetimes:{attached:function(){if(typeof this._mobxMiniprogramBindings=="function"){var r=this._mobxMiniprogramBindings();if(!r){this._mobxMiniprogramBindings=null;return}if(Array.isArray(r)){var t=this;this._mobxMiniprogramBindings=r.map(function(n){var e=(0,v.createDataFieldsReactions)(t,n);return e.updateStoreBindings(),e})}else this._mobxMiniprogramBindings=(0,v.createDataFieldsReactions)(this,r),this._mobxMiniprogramBindings.updateStoreBindings()}},detached:function(){this._mobxMiniprogramBindings&&(Array.isArray(this._mobxMiniprogramBindings)?this._mobxMiniprogramBindings.forEach(function(r){r.destroyStoreBindings()}):this._mobxMiniprogramBindings.destroyStoreBindings())}},methods:{updateStoreBindings:function(){this._mobxMiniprogramBindings&&typeof this._mobxMiniprogramBindings!="function"&&(Array.isArray(this._mobxMiniprogramBindings)?this._mobxMiniprogramBindings.forEach(function(r){r.updateStoreBindings()}):this._mobxMiniprogramBindings.updateStoreBindings())}}})});Object.defineProperty(exports,"__esModule",{value:!0}),function(r,t){for(var n in t)Object.defineProperty(r,n,{enumerable:!0,get:t[n]})}(exports,{BehaviorWithStore:function(){return z},ComponentWithStore:function(){return C},createStoreBindings:function(){return J},initStoreBindings:function(){return W},storeBindingsBehavior:function(){return T}});var w=F(),M=x();function C(r){return Array.isArray(r.behaviors)||(r.behaviors=[]),r.behaviors.unshift(w.behavior),Component(r)}function z(r){return Array.isArray(r.behaviors)||(r.behaviors=[]),r.behaviors.unshift(w.behavior),Behavior(r)}var J=function(r,t){return(0,M.createActions)(r,t),(0,M.createDataFieldsReactions)(r,t)},T=w.behavior,W=function(r,t){var n,e=r.self,o=r.lifetime;return o("attached",function(){(n=(0,M.createDataFieldsReactions)(e,t)).updateStoreBindings()}),o("detached",function(){n.destroyStoreBindings()}),{updateStoreBindings:function(){n&&n.updateStoreBindings()}}};
